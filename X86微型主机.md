
# Raspberry-Pi
树莓派资源整理汇总及分享

> 防背刺声明：'
> 
> 本仓库克隆于 xinxingli/Raspberry-Pi:master
> 但是很多连接已经失效，因此重新进行数据整理，方便用户直接按图找数据
> 
> 二次整理日期：2023.09.17
> 三次更新时间：2024.06。29

# 更新背景
当初买树莓派的背景主要是跑一些脚本，后来用着用着，就变成使用各种docker 作为服务器进行使用。
但是由于树莓派当前是属于arm64架构，所以很多开源软件，例如docker，在arm64架构下，无法使用。
树莓派的CPU性能不够，且主要使用内存卡作为存储体，读取和写入的速度会很慢，做NAS的时候，写入和读取速度都会降低很多（且内存卡损耗会很快），本来原计划是想把树莓派改成使用SATA作为硬盘，读取速度会快很多，然后发现，这样不断的扩充，实际上还不如直接买个小的主机
作为完整的X86手机， 且利用Ubuntu server 系统进行升级和维护，方便对数据进行管理。 
主要方式是利用Ubuntu 甚至搭建 迷你数据库(Postsql数据库)这种形式，进行访问数据，不需要自己额外购买服务器（因为对数据库的需求没有很大）




本文收集了树莓派使用过程中经常需要用到的资源，主要包括树莓派系统镜像、树莓派硬件介绍、树莓派GPIO引脚编号、
树莓派电路原理图下载、树莓派应用、加上笔者踩坑经验、部分常用的Linux命令

## 一、快速上手

购买京东网络链接，二手咸鱼上购买：
[购买链接](https://item.jd.com/10066722886674.html?cu=true&utm_source=www.linkstars.com&utm_medium=tuiguang&utm_campaign=t_1000089893_156_0_184__a9bf9a0cff37b129&utm_term=69ed034815124223b093f3489b4c5)

### 补充连接ubuntu Serve 的方法

参考教程：https://blog.csdn.net/XinYuanIng/article/details/114967651

选取了Serve 作为系统，进行使用

关键词： 【轻量级】 【性能强大】

强烈参考，完整配置操作
https://www.bilibili.com/video/BV15b4y1V7NJ/?spm_id_from=333.337.search-card.all.click&vd_source=615384eb6cc49cc98e6f6557a2c594f9

更新系统：
安装完成后，首次登录，你需要更新系统：
```commandline
sudo apt update
sudo apt upgrade
```


## 二、小主机内网穿透

树莓派若需在公网去访问，就需要内网穿透，进行**内网穿透数据**。
个人公网要求较低，因此主要详细介绍花生壳内网穿透方式
###  (一)、花生壳内网穿透
#### 1.花生壳免费额度
每月限制1G流量，1MB带宽，2条映射

#### 2.  操作步骤
官方介绍已经很详细了，可以直接按照他的步骤来，本人亲测好评
[内网穿透](https://hsk.oray.com/news/23587.html)

[linux配置教程](https://service.oray.com/question/11017.html)

#### 3.花生壳以前整理的知识点
树莓派花生壳内网穿透配置介绍


1、树莓派安装花生壳
我们先去花生壳找符合自己树莓派系统的安装包，这里我的树莓派是64位系统，
会提供一个wget的网址命令，下载完成。

接着输入sudo depkg -i pi.deb等待安装完毕即可。
安装完毕后就会显示设备账户初始信息，包括SN码和初始密码，
以及远程管理网址，当然之后也可以通过命令sudo phddns status来查看：

> sudo phddns ,输入此命令，可以查看花生壳的内网穿透状态
> 
> sudo 主指令：phddns
> 
> phddns start（启动 花生壳）
> phddns version（查看版本 花生壳）
> phddns stop（停止 花生壳）
> 
> phddns restart（重启 花生壳）
> phddns  reset（重置 花生壳）
> 
> phddns  enable（开机自启动 花生壳）
> phddns  status（状态 花生壳），查看状态这里面有SN码。


在浏览器输入网址http://b.oray.com进入远程管理接口，
在终端中输入SN账号和密码
输入对应的SN码和密码，就能进去管理页面，然后进行绑定手机和重置密码等简单操作。

然后在设置映射关系，把得到的网址和端口 映射出来，就可以使用这个网址和端口，进行SHH操作。



### (二)、获取公网IP，直接公网访问
找运营商，索要IPV4/6的公网IP，此网址大多为动态IP（这一步难度有点大）

利用ipv4/6 开通公网，然后设置 路由器，开启 IPV6相关功能，这一步属于相对简单

购买一个域名，**这个域名注册简单，但是还需要备案**，备案步骤繁琐，暂时不想搞（需要购买云服务器等设备）

（更新： 问了腾讯云客服，购买域名， 不用80和403端口，主要用来做解析，固定公网ip 是大概不用备案，先确定自己的账号是不是 已经开放公网ip
然后在折腾一下，路由器刷个固件升级，说不定才可以整，步骤太多了，如果后面稳定下来在整
**没必要为了这种事情，瞎折腾**

23.10.4 更新，南京联通这边据说 改成桥接模式后，如果不断电，据说 公网IP会 固定成一个地址，不会改变。
搬家的时候，可以顺便一起改成桥接模式，利用路由器进行拨号上网

10.18号更新： 已经改成桥接+公网，很舒服，已经连续6天IP地址没有换了，很舒服

）

这个域名，主要是为了 把动态的公网地址，
转化成静态的 域名地址信息，方便进行转换。



## 六、树莓派应用

仅整理自己想要尝试的项目，更多项目，在此链接中寻找

[树莓派可以用来什么？](https://shumeipai.nxez.com/what-raspi-used-for)

### 个人尝试的项目
暂无


### Pycharm 远程部署

建议按照这上面的行为进行部署到树莓派中

https://zhuanlan.zhihu.com/p/267836740


PS：

还有一种做法，就是在开发机上，直接进行编写代码，提交到Github上

在树莓派中，进行git pull并合并 拉取项目，运行项目

当前就是采用这种模式进行数据的拉取和更新。

不需要 自己把文件传输给树莓派，浪费 花生壳流量


# 九、其他碎碎念
1.散热问题：如果不常用的话，散热就整个小风扇吹一吹就可以；如果常用的话，且4核CPU 占用100%，那么就需要注意散热问题。

超过85度，CPU会自动降频；

笔者使用了一个金属结构的被动散热，加上两个小风扇，吹一吹。 CPU全开的情况下，2个小时CPU温度不超过55度
，差点觉得 CPU会被冻感冒 =-=

2.树莓派配置推荐

个人 设备介绍： 
树莓派4B，
内存卡128GB （京东50+买的）（实际上16G内存应该也够用）
有土豪金散热装置
读卡器


# 十、Linux 命令辅助
由于树莓派他是基于Linux进行编译，跟习惯于Windows 的人来说，
会非常不习惯的界面和操作。很容易直接被vi 代码，直接进行劝退。

因此，我在此也分享对一些关于Linux的一些操作
和相关的介绍，知识点相当浅薄，要用的时候，建议多使用chatgtp进行合理提问和开发。

## 1. 树莓派常规维护和编辑
树莓派是属于通电即开机，因此常用的命令为  sudo reboot；这个命令为重启电脑，关机为 shutdown

树莓派类似Windows电脑任务管理器的界面：htop，他可以看到多核CPU的运行情况，内存，详细的任务视图，下方还有一些可以对这个界面进行自定义，显示相关数据，基本满足你对树莓派基本的监控需求

![img.png](图片引用界面/htop界面.png)

## 2. linux 相关信息查询

1.树莓派查看CPU温度
vcgencmd measure_temp

2.查看内存空间
free -h

3.查看硬盘空间
df -h



## 3. 树莓派的编辑和查看文件
Linux的文件权限要求，编辑，查看数据的步骤繁琐

linux 返回上一层级 cd ..

linux 查看目录 ls

linux 查看目录下内容 此命令会 跳转到 pi文件夹里 cd /Home/pi/

linux 授予该目录 读取 写入 执行权限 chmod 777 filepath：如果你无法写入文件的时候，可能是你在普通模式下 ，没有这个文件的写入权限，因此
使用chmod 权限可以授予所有用户这个权限

linux 读取文本的内容 cat xx.txt

linux 编辑文本信息，这里暂时建议使用 nano 进行文本编辑，原因是 所见即所得，比较适合操作习惯
常用的就是保存和退出ctrl+O ctrl+X符号

如图

![img.png](图片引用界面/nano按键.png)


## 3. 定时任务

crontab 定时任务
用crontab写每月第二周周五运行名为a.py的Python脚本,需要使用以下写法:

*/15 * * * 5#2 /usr/bin/python3 /path/to/a.py

详细说明:

*/15 * * * 5#2:

*/15 设置每15分钟运行一次 表示每月每年 5 表示周五 #2表示该月的第二周 /usr/bin/python3:

指定使用  python3解释器执行脚本  /path/to/a.py: 确保自己常用的Python，是安装在哪个地方的

指定要运行的Python脚本路径 总体来说:

每15分钟执行一次 在每月第二周的周五 使用python3运行脚本/path/to/a.py 所以这条crontab可以实现每个月第二周的周五定时运行a.py这个Python脚本任务。

当任务需要在指定时间、日期运行时,通过结合分钟、小时、日期、月份、周几等字段以及#加周数语法就可以方便描述出来。


![img.png](图片引用界面/crontab.png)



## 4.下载文件

发现一个非常好的github项目，涉及到非常多的linux命令，可以
一个学习的项目： [linux项目](https://wangchujiang.com/linux-command/c/wget.html)
使用的时候，直接在搜索即可


使用wget 下载文件
wget -O file:name https://xxx  格式 下载文件


## 5.安装和卸载软件

dpkg
Debian Linux系统上安装、创建和管理软件包
这个是本地安装的命令，可以手动安装包

* dpkg -i package.deb     # 安装包
* dpkg -r package         # 删除包
* dpkg -P package         # 删除包（包括配置文件）




## 7.Linux 文件压缩和解压

> 关键词：`tar`, `gzip`, `zip`, `unzip`
> 
>


## 8.删除文件
在Linux中，`rm`是一个用于删除文件或目录的命令。

以下是一些常用的`rm`命令选项和用法：

1. 删除一个文件：
   ```
   rm filename
   ```

2. 删除多个文件：
   ```
   rm file1 file2 file3
   ```

3. 删除一个目录及其内容：
   ```
   rm -r directory
   ```

   使用`-r`选项来递归删除目录及其内部的所有文件和子目录。

4. 静默删除文件，不发出任何警告或确认：
   ```
   rm -f filename
   ```

   使用`-f`选项会强制删除文件，而不会询问确认。

5. 删除空目录：
   ```
   rmdir directory
   ```

   使用`rmdir`命令可以删除空目录。
6. 删除目录和目录里面的文件
   ```
   rm -rf  directory
   ```

请注意，`rm`命令是不可逆的，删除后的文件将无法恢复。因此，在使用`rm`命令时要小心确认你要删除的文件或目录。特别是在使用`-r`选项递归删除目录时，请务必谨慎操作，以免误删重要文件。

## 9.代理节点
(10.17号 更新，利用docker 部署clash 进行代理加入，主要原因，有一些软件需要代理，而gg是没有代理功能的)

树莓派可以通过脚本进行代理，加快访问外网的速度

[参考链接：GitHub国内加速：在Linux服务器利用gg代理优化访问](https://51.ruyo.net/17589.html)

### 1.小技巧
如果只想代理某一条语句的执行，比如下载文件（使用 curl 或 wget 命令）或者克隆仓库，
推送更改等（git），直接在需要执行的语句前加上 gg 就可以

如果需要代理整个ssh会话的所有命令，只需要执行
gg bash


## 10.查找文件命令

当在Linux中使用`find`、`whereis`和`which`命令时，以下是更详细的用法和示例：

1. `find`命令：
   - 基本用法：`find [目录路径] [选项] [条件]`
   - 示例：
     - 搜索当前目录及其所有子目录下扩展名为`.txt`的文件：
       ```
       find . -name "*.txt"
       ```
     - 搜索指定目录下的大于100MB的文件：
       ```
       find /path/to/directory -size +100M
       ```
     - 查找以`.jpg`和`.png`为扩展名的文件，并删除它们：
       ```
       find /path/to/directory \( -name "*.jpg" -o -name "*.png" \) -delete
       ```

2. `whereis`命令：
   - 基本用法：`whereis [选项] [命令/文件名]`
   - 示例：
     - 查找`ls`命令的可执行文件、源码和帮助文档的路径：
       ```
       whereis ls
       ```
     - 查找`gcc`命令的可执行文件和帮助文档的路径：
       ```
       whereis -b -m gcc
       ```

3. `which`命令：
   - 基本用法：`which [命令名]`
   - 示例：
     - 查找`ls`命令的完整路径：
       ```
       which ls
       ```
     - 查找`python3`命令的完整路径：
       ```
       which python3
       ```

这些命令的具体用法和选项可能因不同的Linux发行版而有所差异，
你可以通过查看命令的手册页（使用`man`命令）来获取更详细的信息。
例如，使用`man find`、`man whereis`和`man which`
来查看它们的详细用法和选项说明。

### 1.三者的异同点

find, whereis 和 which三个命令在Linux下都可以用于查找文件和命令,它们的主要异同点如下:

同点:

- 都是Linux下常用的查找命令

- 都可以用于查找文件路径或命令路径

不同点:

查找目标:

- find可以查找文件系统下任何文件
- whereis主要查找命令相关文件(binary,源码,manpage等)
- which查找将被调用的具体命令路径  

查找范围:

- find可以查找整个文件系统
- whereis范围限于系统默认路径下  
- which只查找PATH环境变量定义的路径

匹配条件:  

- find支持各种匹配文件的条件匹配如名称,类型,大小等
- whereis只支持通过命令名称匹配
- which直接根据命令名称匹配

应用场景:

- find适用于需要在文件系统深层次搜索文件的情况
- whereis适用于快速查找某命令相关文件的位置
- which用于明确将调用哪个命令的实际路径

总之,find功能较强大,但whereis和which操作更简单高效。
主要区别在于它们查找的目标和范围不尽相同。
在实际操作中需要根据不同需求选择正确的命令。

# 树莓派安装qt，做NAS
当前有一块斐讯的1T移动硬盘，通过特殊的Type-C接口传入数据。

利用sms 挂载硬盘，备注：当前挂载出点问题，当在/etc/fstab中，修改开机自启后，树莓派重启之后，直接死机。 **建议重启的时候，手动挂载。**

利用树莓派进行接收和存储数据，把数据保存到移动硬盘中。
利用smb 进行存储和局域网共享，通过 多终端分享文件系统。

后续开了公网IP之后，可以把剧 存储在这上面，
利用MX浏览器，进行远程访问媒体。（已经开通公网+桥接，
路由器不断电，就不会换域名）

确实是因为很多剧，不能在线看，或者 资源比较少。 
还不如直接找一下资源，手机能看，电脑能看，电视都能看，
只要访问自家的NAS就可以。

这样就可以无缝切换，实现影音全关注

PS：10.23号更新：

当前使用alist包的webdav的形式，而不是SMB的方式进行多媒体播放
webdav 用户配置和管理数据相对轻量简单。

安卓 使用 nplay 进行视频播放


## 11. 软件安装和配置
sudo apt-get 

在Linux Debian版本中，sudo service是用于管理系统服务的命令。它允许普通用户以超级用户（root）权限运行系统服务的相关命令。

以下是一些常用的sudo service命令：

apt install 可以安装包，他会把各种文件归类 可执行文件会放在/usr/bin
之中，这样会方便执行文件

启动一个服务：
sudo service <service_name> start

停止一个服务：
sudo service <service_name> stop

重启一个服务：
sudo service <service_name> restart

查看一个服务的状态：
sudo service <service_name> status

启用一个服务，使其在系统启动时自动启动：
sudo service <service_name> enable

禁用一个服务，使其在系统启动时不自动启动：
sudo service <service_name> disable

需要注意的是，“<service_name>”应该替换为实际的服务名称。你可以使用sudo service --status-all命令来获取所有可用服务的列表，并查看其名称。





# docker 项目配置
docker 安装,以及 docker-compose 安装

## 最重要的docker容器
比如clash,参考clash配置 [clashdocker 安装](https://golang.0voice.com/?id=8022)

portainer docker容器可视化
[portainer](https://imnks.com/3406.html)




## 各种软件配置

## 6. 命令补全软件-oh-my-zsh

>
> Zsh 完全兼容 bash，支持强大的智能命令补全功能，
> 支持大量的界面主题和插件，功能和效率都极大的增强和提高。
> 
> 

[网页教程介绍](https://sysin.org/blog/linux-zsh/)


在 Linux 中安装 htop 实用程序
在大多数的 Linux 发行版中你不会找到预安装的 htop，但作为最流行的实用程序之一，你会在几乎每个 Linux 发行版的默认存储库中找到 htop。

因此，如果你的机器是基于 Debian/Ubuntu 驱动的，则以下命令应该可以完成你的工作：

```
sudo apt install htop
```


