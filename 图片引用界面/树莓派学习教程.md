
> 一定不要迷失在 树莓派 大号玩具之中，搞代码，创造有趣的东西，才是
> 我买树莓派的核心。知识收敛才是最重要的事情。
> > 纯粹碎碎念; 暂时废弃此文档，勿看




# 为什么会使用树莓派？
树莓派作为一款开发板，和市面上很多开发板比如 香橙派、XX都一样，都是
可以成为一台微型电脑。 这个树莓派一定要留着，一定不能丢，说不定这个设备可以传给自己的娃用
哈哈

他们都有相同的特点，就是有完整的开发环境，大多使用Linux开源系统，拥有多种接口，比如 树莓派
就拥有多个USB口，HDMI输出口，无线wifi等 和电脑类似的接口。 值得一提的就是他让我眼前一亮的事情
就是他的 pgio口，支持多个引脚，可以连接控制多个电子元件


我购入树莓派，吃灰的原因，就是使用需求不持久，没有**需求** 创造需求，在这种情况下，购买
树莓派和购买Kindle 或者其他设备一样，都是男人的大号玩具，玩一段时间，就会丧失他已有的乐趣。

很多玩具，会过时，而这个玩具，更像是一个现实版MC工具，是一个引子，可以长期做电脑运行，因为是
linux 系统，所以他可以长期使用，稳定。

这种玩具除非性能问题，需要更强的配置的时候，才需要换掉他。显然那时候已经可以有更专业的板子来
替换他的需求

比如你需要一个服务器，离不开才会买
而不是，买来创造需求，这样吃灰的概率更小。 
感觉这种需求和运用关系，就像是鸡生蛋 ，蛋生鸡的问题，暂时理不清这种。感觉需要对树莓派  
有一定了解，知道他能做
什么，

把他融入到自己的开发环境中，才能实现闭环，我寻思这才是最重要的事情。


## 未来补充的项目
长期跑一些软件这种；
1. 定期跑基金的相关数据脚本。
2. 如果是天气不好，定时去提醒 今天的天气，记得带伞。
3. 内网穿透，做一些操作。
4. **可以部署玩客云，在闲置的时候，上传带宽，赚点外快！！！这个想法不错**



后续可以不断新增自己的新功能

我外公就是一个折腾电器，电焊，搞各种类型的 DIY爱好者，感觉，越来越觉得，这种对爱好的
追逐，也是他的想法。

我也是这种情况，喜欢和**热爱**一些东西，因此，可以继续研究和琢磨自己的爱好，分享自己的爱好
变成技术大牛！！！



## 相关补充
1. 网心云上传数据，需要把树莓派刷新成一个新的程序，把数据格式化，如果后面真的弃坑,可以考虑 
买个新的内存卡，烧录这个整合包，原来的SD卡不能丢，一定不能丢！

2. 还要购买固态硬盘（480G)
https://help.onethingcloud.com/7cb4/3ed5/39ae






## 2.Linux 文件压缩和解压

> 关键词：`tar`, `gzip`, `zip`, `unzip`

### 1. Linux 文件压缩和解压要点

- 压缩和解压 tar 文件 - 使用 [tar](#tar)
- 压缩和解压 gz 文件 - 使用 [gzip](#gzip)
- 压缩和解压 zip 文件 - 分别使用 [zip](#zip)、[unzip](#unzip)

### 2. 命令常见用法

#### 2.1. tar

> tar 命令可以为 linux 的文件和目录创建档案。利用 tar，可以为某一特定文件创建档案（备份文件），也可以在档案中改变文件，或者向档案中加入新的文件。tar 最初被用来在磁带上创建档案，现在，用户可以在任何设备上创建档案。利用 tar 命令，可以把一大堆的文件和目录全部打包成一个文件，这对于备份文件或将几个文件组合成为一个文件以便于网络传输是非常有用的。
>
> 参考：http://man.linuxde.net/tar

示例：

```bash
tar -cvf log.tar log2012.log            # 仅打包，不压缩
tar -zcvf log.tar.gz log2012.log        # 打包后，以 gzip 压缩
tar -jcvf log.tar.bz2 log2012.log       # 打包后，以 bzip2 压缩

tar -ztvf log.tar.gz                    # 查阅上述 tar 包内有哪些文件
tar -zxvf log.tar.gz                    # 将 tar 包解压缩
tar -zxvf log30.tar.gz log2013.log      # 只将 tar 内的部分文件解压出来
```

#### 2.2. gzip

> gzip 命令用来压缩文件。gzip 是个使用广泛的压缩程序，文件经它压缩过后，其名称后面会多出“.gz”扩展名。
>
> gzip 是在 Linux 系统中经常使用的一个对文件进行压缩和解压缩的命令，既方便又好用。gzip 不仅可以用来压缩大的、较少使用的文件以节省磁盘空间，还可以和 tar 命令一起构成 Linux 操作系统中比较流行的压缩文件格式。据统计，gzip 命令对文本文件有 60%～ 70%的压缩率。减少文件大小有两个明显的好处，一是可以减少存储空间，二是通过网络传输文件时，可以减少传输的时间。
>
> 参考：http://man.linuxde.net/gzip

示例：

```bash
gzip * # 将所有文件压缩成 .gz 文件
gzip -l * # 详细显示压缩文件的信息，并不解压
gzip -dv * # 解压上例中的所有压缩文件，并列出详细的信息
gzip -r log.tar     # 压缩一个 tar 备份文件，此时压缩文件的扩展名为.tar.gz
gzip -rv test/      # 递归的压缩目录
gzip -dr test/      # 递归地解压目录
```

#### 2.3. zip

> zip 命令可以用来解压缩文件，或者对文件进行打包操作。zip 是个使用广泛的压缩程序，文件经它压缩后会另外产生具有“.zip”扩展名的压缩文件。
>
> 参考：http://man.linuxde.net/zip

示例：

```bash
# 将 /home/Blinux/html/ 这个目录下所有文件和文件夹打包为当前目录下的 html.zip
zip -q -r html.zip /home/Blinux/html
```

#### 2.4. unzip

> unzip 命令用于解压缩由 zip 命令压缩的“.zip”压缩包。
>
> 参考：http://man.linuxde.net/unzip

示例：

```bash
unzip test.zip              # 解压 zip 文件
unzip -n test.zip -d /tmp/  # 在指定目录下解压缩
unzip -o test.zip -d /tmp/  # 在指定目录下解压缩，如果有相同文件存在则覆盖
unzip -v test.zip           # 查看压缩文件目录，但不解压
```

##  3.安装软件包

dpkg
Debian Linux系统上安装、创建和管理软件包


* dpkg -i package.deb     # 安装包
* dpkg -r package         # 删除包
* dpkg -P package         # 删除包（包括配置文件）
* dpkg -L package         # 列出与该包关联的文件
* dpkg -l package         # 显示该包的版本
* dpkg --unpack package.deb  # 解开deb包的内容
* dpkg -S keyword            # 搜索所属的包内容
* dpkg -l                    # 列出当前已安装的包
* dpkg -c package.deb        # 列出deb包的内容
* dpkg --configure package   # 配置包


## 树莓派安装miniconda



以下是在树莓派上安装和使用Miniconda的步骤:

1. 更新系统包索引和安装依赖包:

```
sudo apt update --yes
sudo apt upgrade --yes
```

2. 下载Miniconda安装包:

这个亲测好用
https://zhuanlan.zhihu.com/p/612338843

5. 创建和激活环境:

```
conda create -n myenv python=3.9
conda activate myenv
```

6. 安装包管理:

```
conda install numpy pandas jupyterlab
```

7. 测试安装:

```
python -c "import pandas;print(pandas.__version__)"
```

~~以后可以使用conda来管理不同Python环境和包的安装。

需要注意的是,需要下载针对树莓派CPU架构的Miniconda安装包,一般是arm32或arm64版本。
当前Miniconda pip 还是有bug 暂时不去管这个
~~

### 修改为国内源
将Miniconda的源地址改成国内源,可以加快下载速度和使用体验。操作如下:

1. 查看当前Conda 的源地址:

```
conda config --show channels
```

2. 添加国内Conda源地址:

```
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
```

部分国内镜像源地址推荐:

- 清华源: https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ 
- 阿里源: https://mirrors.aliyun.com/anaconda/pkgs/free/
- 华中理工源:https://mirrors.hust.edu.cn/anaconda/pkgs/free/

3. 设置搜索优先顺序:

```
conda config --set show_channel_urls yes
conda config --prepend channels 'https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/'
conda config --prepend channels 'https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/'
```

4. 清除缓存后测试下载速度。

以上操作可以将Miniconda的默认源更换成国内镜像源,加快后续的conda命令安装速度。需要根据自身网络情况选择合适的源地址。

### 如何使用这个软件运行Python

有几种方式可以打开一个conda环境中的Python:

1. 激活环境后直接使用python命令

先使用命令激活环境:

```
conda activate 环境名称
```

然后就可以直接使用python命令进入该环境中的Python解释器了:

```
python
```

2. 指定环境的python路径

不激活环境情况下,可以指定环境bin目录下的python路径来启动:

```
conda env list #查看环境路径
/path/to/envs/环境名称/bin/python
```

3. 使用jupyter notebook

在激活环境后,使用jupyter notebook命令会默认使用该环境中的python:

``` 
conda activate 环境名称
jupyter notebook
```

4. 命令行参数指定解释器

像ipython等REPL可以使用参数指定解释器路径:

```
ipython -- doute duaouKDZ
```

5. 开启IPython配置文件路径

IPython有配置文件,可以手动指定python路径开启:

```
ipython console --IPythonApp.exec_lines="import sys; sys.path.append('/path/to/envs')"
```

所以一般直接激活环境后使用python命令即可进入conda环境中的Python解释器,或者指定环境路径的python也可以。


### 安装新的包

Miniconda可以很方便地用来安装和管理Python包。主要有以下几种方式:

1. 使用conda命令行工具安装包

conda是一个专门为Python打包和虚拟环境管理设计的包管理工具。可以使用以下命令安装包:

```
conda install package_name
```

例如安装Numpy:

```
conda install numpy
```

2. 创建环境后在环境中安装包

首先创建独立的环境:

```
conda create -n myenv
```

然后激活环境:

```
conda activate myenv
```

在环境中使用conda安装包:

```
conda install package_name
```

3. 使用pip安装包

conda环境中同样集成了pip,可以使用pip安装额外的包:

```
pip install package_name
```

4. 从conda-forge频道安装

conda-forge社区提供的包更为新颖和丰富:

```
conda install -c conda-forge package_name
```

5. 从源代码安装

从GitHub或PyPI下载源代码,使用pip完成源代码安装:

```
pip install .
```

所以通过Miniconda + conda/pip,可以非常方便地在隔离环境中安装和管理各种Python科学计算和数据分析相关的软件包。


## 术语学习


### echo

在Linux命令中，"echo"是一个用于打印文本、字符串或变量内容到标准输出（通常是终端或命令行界面）的命令。它接收一个或多个参数，并将这些参数的值原样输出。

例如，您可以使用"echo"命令来显示一条简单的消息：
```
echo "Hello, World!"
```
运行以上命令将在终端中输出"Hello, World!"。

除了打印文本，"echo"命令还可以用于显示变量的值：
```
name="John"
echo "My name is $name"
```
上述命令将在终端中输出"My name is John"，其中变量"name"的值被插入到字符串中。

"echo"命令还可以通过不同的选项来控制输出格式，如"-n"可以去除输出后的换行符。可以在终端中运行"man echo"命令以获取更多关于"echo"命令的详细信息和可用选项的说明。


### bash

Bash是一个命令处理器，通常运行于文本窗口中，并能执行用户直接输入的命令。

## 基础命令

chmod 777 filename 这个文件全部的权限

chmod 777表示文件的权限设置为777。

这里777用数字表示法表示文件的权限设置:

777可以分解为3组数字:
第一组7表示用户(User)的权限:

7=4+2+1

4表示用户有读权限

2表示用户有写权限

1表示用户有执行权限

第二组7表示群组(Group)的权限:

含义同用户权限
第三组7表示其他用户(Others)的权限:

含义同用户权限
所以chmod 777给文件设置的权限含义是:

给用户设置读、写和执行权限
给群组设置读、写和执行权限
给其他用户设置读、写和执行权限
**那么chmod 777实际上就是给文件授予最高的权限,即用户、群组和其他用户都拥有
该文件所有权限,包括读、写和执行。**

但一般不建议使用chmod 777,因为它给了所有人最高权限,会带来安全隐患。
正确的做法是根据需要给不同用户设置合理的最小权限。


## chown

"chown"是一个在Linux和其他类Unix系统中用于更改文件或目录的所有者的命令。它可以用于将文件或目录的所有权从一个用户转移给另一个用户，前提是您有足够的权限来执行此操作。

基本的用法是：
```
chown [新所有者] 文件名
```
其中，[新所有者] 是您要分配给文件或目录的新所有者的用户名或用户ID。

例如，要将文件 "file.txt" 的所有权转移给用户 "user1"，可以使用以下命令：
```
chown user1 file.txt
```
这将将 "file.txt" 文件的所有者更改为 "user1"。

除了更改所有者，还可以使用chown命令来更改文件的所属组。这可以通过在新所有者之前加上冒号和所属组名来实现：
```
chown [新所有者]:[新所属组] 文件名
```
例如，要将文件 "file.txt" 的所有权转移给用户 "user1"，同时更改文件的所属组为 "group1"，可以使用以下命令：
```
chown user1:group1 file.txt
```
请注意，更改文件或目录的所有者可能需要超级用户（root）权限，具体取决于您对文件系统的访问权限。因此，在使用chown命令时，请确保您拥有足够的权限来执行所需的更改。


### 树莓派相关信息查询 
#### 4.树莓派查看CPU温度
```vcgencmd measure_temp```


#### 5.查看内存空间
``` free -h ```

#### 6.查看硬盘空间
``` df -h ```

## crontab 定时任务

用crontab写每月第二周周五运行名为a.py的Python脚本,需要使用以下写法:

*/15 * * * 5#2 /usr/bin/python3 /path/to/a.py

详细说明:

*/15 * * * 5#2:

*/15 设置每15分钟运行一次
表示每月每年
5 表示周五
#2表示该月的第二周
/usr/bin/python3:

指定使用python3解释器执行脚本
/path/to/a.py:

指定要运行的Python脚本路径
总体来说:

每15分钟执行一次
在每月第二周的周五
使用python3运行脚本/path/to/a.py
所以这条crontab可以实现每个月第二周的周五定时运行a.py这个Python脚本任务。

当任务需要在指定时间、日期运行时,通过结合分钟、小时、日期、月份、周几等字段以及#加周数语法就可以方便描述出来。
